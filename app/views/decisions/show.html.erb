<span data-controller="decision"><strong># <%= @decision.question %></strong>
Reference tag: <a href="<%= @decision.path %>">#<%= @decision.reference_tag %></a>
Created at: <%= @decision.created_at %>
Created by: <%= @decision.created_by.email %>
Status: <%= @decision.status || '[none]' %>
<% (@decision.other_attributes || {}).each do |key, val| %><%= key %>: <%= val %>
<% end %>

<strong>## Options (<span id="decision-count-display"><%= @decision.options.count %></span>)</strong>
Check all options you approve.

<span data-decision-target="list"><% @decision.options.each do |option| %><% approval = option.approvals.where(created_by: current_user).first || Approval.new(value: 0) %><span class="option-item" data-option-id="<%= option.id %>">- <span class="markdown-checkbox" data-action="click->decision#toggleApproved">[<%= approval.value == 1 ? 'x' : ' ' %>]</span> <%= option.title %></span>
<% end %></span>- [ ] <form style="display:inline;" data-action="submit->decision#add"><input type="text" data-decision-target="input"  data-team-id="<%= @decision.team_id %>" data-decision-id="<%= @decision.id %>" placeholder="Add an option"><button type="submit">Add</button>
</form>
<strong>## Results</strong>
<a data-action="click->decision#toggleResults" href="#">Show results</a><span id="results" style="display:none;">
<%= render 'results' %>
</span>

<strong>## Referenced By (<%= @decision.reference_count %>)</strong>
<% if @decision.reference_count == 0 %>References will show up here when other decisions include this decision's reference tag: #<%= @decision.reference_tag %><% else %>The following decisions reference this decision.
<% @decision.referenced_by.each do |ref| %>* <a href="<%= ref.path %>" title="<%= ref.question %>">#<%= ref.reference_tag %></a>
<% end %><% end %>
</span>